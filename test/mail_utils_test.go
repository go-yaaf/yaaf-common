// Token Utils tests

package test

import (
	"github.com/go-yaaf/yaaf-common/utils/mail"
	"github.com/stretchr/testify/require"
	"testing"
)

func TestMail(t *testing.T) {
	skipCI(t)

	uri := "https://some.url"
	cfg := mail.NewMailConfig(uri).SetHeader("x-api-key", "some_key")

	client, err := cfg.CreateClient()
	require.Nil(t, err)

	msg := client.CreateTextMessage()
	msg.From("from@org.io")
	msg.AddTo("user2@org2.com")
	msg.AddCc("user3@org3.com")

	msg.Body("put yor body here")
	msg.Subject("subject")

	msg.Attach("/file/path/one.ext")
	msg.Attach("/file/path/two.ext")

	err = msg.Send()
	require.Nil(t, err)

}
